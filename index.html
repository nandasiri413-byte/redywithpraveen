 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PRAVEEN'S CALENDAR</title>
    <style>
        :root {
            --glass: rgba(0, 0, 0, 0.6);
            --red-text: #ff0000;
        }

        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: Arial, sans-serif;
            overflow: hidden;
            background: url('https://images.unsplash.com/photo-1518709268805-4e9042af9f23?q=80&w=2000') no-repeat center center fixed;
            background-size: cover;
            color: white;
        }

        #overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            cursor: pointer;
        }

        .canvas-layer {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .main-content {
            position: relative;
            z-index: 10;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            height: 100vh;
            overflow-y: auto;
        }

        h1 {
            color: var(--red-text);
            font-size: 2.2rem;
            margin-bottom: 20px;
            text-shadow: 2px 2px 5px rgba(0,0,0,0.7);
        }

        .info-section {
            display: flex;
            gap: 20px;
            width: 90%;
            max-width: 900px;
            margin-bottom: 30px;
        }

        .card {
            background: var(--glass);
            backdrop-filter: blur(10px);
            padding: 20px;
            border-radius: 15px;
            border: 1px solid rgba(255,255,255,0.1);
            flex: 1;
        }

        .time-large { font-size: 2.5rem; font-weight: bold; color: #00ffcc; }
        
        /* Calendar Styling */
        .calendar-card {
            width: 90%;
            max-width: 500px;
            background: var(--glass);
            backdrop-filter: blur(15px);
            padding: 20px;
            border-radius: 15px;
            touch-action: none; /* Disable default touch to allow swipe */
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            text-align: center;
        }

        .day-header { font-weight: bold; color: #aaa; padding-bottom: 10px; }
        .sunday { color: var(--red-text); font-weight: bold; }
        .month-label { font-size: 1.5rem; margin-bottom: 15px; text-align: center; }

        /* Wind effect overlay */
        #wind-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255, 255, 255, 0);
            pointer-events: none;
            transition: background 2s;
            z-index: 2;
        }
        .wind-active { background: rgba(255, 255, 255, 0.1) !important; filter: blur(2px); }

    </style>
</head>
<body>

<div id="overlay" onclick="startApp()">
    <h1>CLICK TO START EXPERIENCE</h1>
</div>

<canvas id="effectCanvas" class="canvas-layer"></canvas>
<div id="wind-overlay"></div>

<div class="main-content">
    <h1>PRAVEEN'S CALENDAR</h1>

    <div class="info-section">
        <div class="card">
            <div id="colombo-time" class="time-large">00:00:00</div>
            <div>Colombo, Sri Lanka</div>
            <hr>
            <div id="world-clocks">
                London: <span id="lon-time"></span><br>
                New York: <span id="ny-time"></span><br>
                Tokyo: <span id="tok-time"></span>
            </div>
        </div>
        <div class="card">
            <div style="font-size: 1.2rem;">Sri Lanka Weather</div>
            <div id="weather-status" style="font-size: 1.5rem; margin-top: 10px;">Cloudy / Rainforest Humid</div>
            <div style="font-size: 2rem;">29Â°C</div>
        </div>
    </div>

    <div class="calendar-card" id="cal-container">
        <div id="month-title" class="month-label">Month Year</div>
        <div class="calendar-grid" id="calendar-body"></div>
        <p style="text-align: center; font-size: 0.8rem; color: #ccc; margin-top: 10px;">Swipe UP for next month</p>
    </div>
</div>

<audio id="snd-rain" loop src="https://www.soundjay.com/nature/rain-01.mp3"></audio>
<audio id="snd-snow" loop src="https://www.soundjay.com/nature/wind-01.mp3"></audio>
<audio id="snd-wind" loop src="https://www.soundjay.com/nature/wind-04.mp3"></audio>
<audio id="snd-swipe" src="https://www.soundjay.com/human/page-flip-01.mp3"></audio>

<script>
    const canvas = document.getElementById('effectCanvas');
    const ctx = canvas.getContext('2d');
    let particles = [];
    let mode = 'rain'; // rain, snow, wind
    let currentMonth = new Date().getMonth();
    let currentYear = new Date().getFullYear();

    function startApp() {
        document.getElementById('overlay').style.display = 'none';
        updateCycle();
        setInterval(updateCycle, 5000);
        setInterval(updateClocks, 1000);
        renderCalendar(currentMonth, currentYear);
        animate();
    }

    // Weather Cycle Logic
    function updateCycle() {
        const rainSnd = document.getElementById('snd-rain');
        const snowSnd = document.getElementById('snd-snow');
        const windSnd = document.getElementById('snd-wind');
        const windOverlay = document.getElementById('wind-overlay');

        // Reset
        rainSnd.pause(); snowSnd.pause(); windSnd.pause();
        windOverlay.classList.remove('wind-active');

        if (mode === 'rain') {
            mode = 'snow';
            snowSnd.play();
        } else if (mode === 'snow') {
            mode = 'wind';
            windSnd.play();
            windOverlay.classList.add('wind-active');
        } else {
            mode = 'rain';
            rainSnd.play();
        }
        initParticles();
    }

    // Particle System
    function initParticles() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        particles = [];
        let count = mode === 'rain' ? 150 : 100;
        for (let i = 0; i < count; i++) {
            particles.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                v: Math.random() * 5 + 2,
                l: Math.random() * 15 + 5,
                r: Math.random() * 3 + 1
            });
        }
    }

    function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = "rgba(255,255,255,0.7)";
        ctx.strokeStyle = "rgba(255,255,255,0.4)";

        particles.forEach(p => {
            if (mode === 'rain') {
                ctx.beginPath();
                ctx.moveTo(p.x, p.y);
                ctx.lineTo(p.x, p.y + p.l);
                ctx.stroke();
                p.y += p.v * 2;
            } else if (mode === 'snow') {
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
                ctx.fill();
                p.y += p.v * 0.5;
                p.x += Math.sin(p.y / 20);
            }

            if (p.y > canvas.height) p.y = -20;
            if (p.x > canvas.width) p.x = 0;
            if (p.x < 0) p.x = canvas.width;
        });
        requestAnimationFrame(animate);
    }

    // Clocks
    function updateClocks() {
        const now = new Date();
        document.getElementById('colombo-time').innerText = now.toLocaleTimeString('en-GB', {timeZone: 'Asia/Colombo'});
        document.getElementById('lon-time').innerText = now.toLocaleTimeString('en-GB', {timeZone: 'Europe/London', hour:'2-digit', minute:'2-digit'});
        document.getElementById('ny-time').innerText = now.toLocaleTimeString('en-GB', {timeZone: 'America/New_York', hour:'2-digit', minute:'2-digit'});
        document.getElementById('tok-time').innerText = now.toLocaleTimeString('en-GB', {timeZone: 'Asia/Tokyo', hour:'2-digit', minute:'2-digit'});
    }

    // Calendar logic
    function renderCalendar(m, y) {
        const body = document.getElementById('calendar-body');
        const title = document.getElementById('month-title');
        body.innerHTML = '';
        const months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
        title.innerText = `${months[m]} ${y}`;

        ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].forEach(d => {
            body.innerHTML += `<div class="day-header">${d}</div>`;
        });

        const firstDay = new Date(y, m, 1).getDay();
        const daysInMonth = new Date(y, m + 1, 0).getDate();

        for (let i = 0; i < firstDay; i++) body.innerHTML += '<div></div>';

        for (let d = 1; d <= daysInMonth; d++) {
            const isSunday = new Date(y, m, d).getDay() === 0;
            body.innerHTML += `<div class="${isSunday ? 'sunday' : ''}">${d}</div>`;
        }
    }

    // Swipe Handling
    let touchStartY = 0;
    const calEl = document.getElementById('cal-container');

    calEl.addEventListener('touchstart', e => { touchStartY = e.changedTouches[0].screenY; });
    calEl.addEventListener('touchend', e => {
        let touchEndY = e.changedTouches[0].screenY;
        if (touchStartY - touchEndY > 50) { // Swipe Up
            if (currentYear >= 2030 && currentMonth === 11) return;
            currentMonth++;
            if (currentMonth > 11) { currentMonth = 0; currentYear++; }
            document.getElementById('snd-swipe').play();
            renderCalendar(currentMonth, currentYear);
        }
    });

    window.addEventListener('resize', initParticles);
</script>
</body>
</html>
